
<h1>{{(current$ | async)?.title}}</h1>
<p>published {{(current$ | async)?.published | date:'dd.MM.yyyy HH:mm'
}} <br>
last refreshed {{(current$ | async)?.lastRefresh | date:'dd.MM.yyyy HH:mm'}}</p>

<table mat-table [dataSource]="(current$ | async)?.operations" width="100%">
  <ng-container matColumnDef="level">
    <th mat-header-cell *matHeaderCellDef> Level </th>
    <td mat-cell *matCellDef="let element"> {{element.alarmlevel}} 


    </td>
  </ng-container>
  
  <ng-container matColumnDef="destination">
    <th mat-header-cell *matHeaderCellDef> City </th>
    <td mat-cell *matCellDef="let element"> {{element.destination.city}} </td>
  </ng-container>

  <ng-container matColumnDef="start">
    <th mat-header-cell *matHeaderCellDef> Start </th>
    <td mat-cell *matCellDef="let element"> {{element.starttime | date:'dd.MM.yyyy HH:mm'}} </td>
  </ng-container>
<!-- 
  <ng-container matColumnDef="end">
    <th mat-header-cell *matHeaderCellDef> End </th>
    <td mat-cell *matCellDef="let element"> {{element.endtime | date:'dd.MM.yyyy HH:mm'}} </td>
  </ng-container> -->

  <ng-container matColumnDef="type">
    <th mat-header-cell *matHeaderCellDef> Type </th>
    <td mat-cell *matCellDef="let element"> {{element.type.subName}} </td>
  </ng-container>
  
  <ng-container matColumnDef="units">
    <th mat-header-cell *matHeaderCellDef> Units </th>
    <td mat-cell *matCellDef="let element">
      <mat-chip-list >
        <mat-chip *ngFor="let unit of element.units">{{unit.name}}</mat-chip>
        
      </mat-chip-list>
    </td>
  </ng-container>

  <ng-container matColumnDef="link">
    <th mat-header-cell *matHeaderCellDef> Maps </th>
    <td mat-cell *matCellDef="let element"> 

      <a target="_blank" rel="noopener noreferrer" href="{{element.destination.geo.mapsLink}}">
        Go to
      </a>
    </td>
  </ng-container>

 


  <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
  <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
</table>

